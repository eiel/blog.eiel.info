<!DOCTYPE html>

<meta charset="utf-8">


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">



<meta property="og:title" content="そんなこと覚えてない">
<meta property="og:url" content="https://blog.eiel.info">

<meta property="og:site_name" content="そんなこと覚えてない">

<title>
    
    Tags | そんなこと覚えてない
    
</title>


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/solarized_light.min.css">
<link rel="stylesheet" href="https://blog.eiel.info/css/base.css">
<link rel="stylesheet" href="https://blog.eiel.info/css/styles.css">
<link rel="stylesheet" href="https://blog.eiel.info/css/custom.css">


<link rel="shortcut icon" href="https://blog.eiel.info/assets/favicon.ico">


<link rel="alternate" type="application/rss+xml" title="RSS" href="https://blog.eiel.info/index.xml">



<div class="wrap">
    <div class="masthead">
        <div class="container">
            <h3 class="masthead-title">
                <a href="https://blog.eiel.info" title="Home">そんなこと覚えてない</a>
            </h3>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
        </div>
    </div>

    <div class="container content">


<div class="posts">
    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2014/09/24/re-modified-rails-update/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2014 9月24日 23:23</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2014/09/24/re-modified-rails-update/">re: Rails update時に値を変更して更新したい</a></h1>
        <div class="summary">友人のブログ記事へのレスです。 JunkBox～主に個人的防備録～: Rails update時に値を変更して更新したい。について。 さすがにやってることがまわりくどい。コメント欄だと返信がつらいのでここにかく。 まず、元の内容を引用します。 たとえば、保存時１０円単位で四捨五入して保存したい場合。 ついでに登録日を１日ずらす。 日付型の項目は、年、月、日、時、分、秒と別れてパラメタに入ってくるので、扱いづらい。ので、一旦モデルに突っ込んで処理し、その後ハッシュに変換する。 def update # パラメタを一旦モデルに突っ込む tmp = Syohin.new(syohin_params) # 金額を10円単位で丸める tmp.kingaku = tmp.kingaku.round(-1) # 日付型の登録日を１日ずらす。 tmp.record_datetime = tmp.record_datetime + (60 * 60 * 24) # モデルをハッシュに変換する。 tmp2 = tmp.attributes # 不要なキーを削除 [&quot;id&quot;,&quot;created_at&quot;,&quot;updated_at&quot;].each do |key| tmp2.delete(key) end #updateに突っ込む respond_to do |format| if @syohin.update(tmp2) format.html { redirect_to @syohin, notice: '更新完了' } else format.html { render :edit } end end end わざわざ一時的な新しいモデルをつくっているけど、updateメソッドのsaveしなバージョンのメソッドがある。assign_attributesメソッドである。 def update @syohin.assign_attributes(syohin_params)</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2014/09/24/re-modified-rails-update/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2014/08/22/rails4-beta/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2014 8月22日 15:21</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2014/08/22/rails4-beta/">Rails 4.2.0 beta1 ちょっとだけ見たのでメモしとく。</a></h1>
        <div class="summary">Rails 4.2.0.beta1 が出てるよね。 Riding Rails: Rails 4.2.0 beta1: Active Job, Deliver Later, Adequate Record, Web Console betaが出ると試したくなるのでアップデートしても問題ないものをアップデートして遊ぶ。 先に結論 詳細とかあとで述べる。 Gemfile に追加とか変更とか。 gem 'rails', '4.2.0.beta1' gem 'sass-rails', '~&gt; 5.0.0.beta1' gem 'web-console', '~&gt; 2.0.0.beta2' group :development, :test do gem 'byebug' gem 'web-console', '~&gt; 2.0.0.beta2' end gem 'rails-html-sanitizer', '~&gt; 1.0' config/application.rb に追加 config.active_record.raise_in_transactional_callbacks = true config/environments/development.rb に追加。 config.assets.digest = true rails new したときの違い rails new してときの生成されるファイルの違い下記の方法で確認した。 $ rails _4.2.0.beta1_ new --no-rc hoge $ mv hoge 4.2.0.beta1 $ rails _4.1.5_ new --no-rc hoge $ mv hoge 4.1.5 $ diff -ur 4.1.5 4.2.0.beta1/ 全文はGistに貼った。 まず gem 関連 web-console と byebug と rails-html-sanitizer が追加されてる。 その他は、バージョン調整されてるだけ。 debugger はたぶん ruby 2.1 だと動いてないし、web-console を使うようになったので、byebug も追加された感じがする。よくしらん。 rails-html-sanitaizer は sanitize ヘルパーが追加できるらしい。HTMLタグがとりのぞけて独自のルールはScrubberを作ることで調整ができる模様。 以下、それ意外の抜粋。 onfig/application.rb + # For not swallow errors in after_commit/after_rollback callbacks.</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2014/08/22/rails4-beta/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2014/08/02/gaba-ltdd/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2014 8月2日 11:00</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2014/08/02/gaba-ltdd/">LT駆動開発で とある我馬の非公式というLTをした</a></h1>
        <div class="summary">LT駆動開発06 でライトニングトークをした。 我馬というラーメン屋のウェブサイトが更新情報のフィード配信してないので、勝手に応援しているという話をしました。 とある我馬の非公式(ファンサイト) 折角なのでフィードの存在を知らない人もいるかもしれないので、簡単に説明しつつ、どうやってフィードをつくったのか説明しました。 とりあえず、季節のラーメンはアツいので広島には3ヶ月に一度程度いらっしゃると良いと思います。 関連 とある我馬の非公式(ファンサイト) 我馬 eiel/gaba · GitHub eiel/gaba.eiel.info · GitHub</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2014/08/02/gaba-ltdd/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2014/07/28/action-view-with-slim/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2014 7月28日 15:52</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2014/07/28/action-view-with-slim/">ActionView 単体で slim を使ってみる</a></h1>
        <div class="summary">「ActionView を単体で使ってみる」というのを書いたので、ついでにいろいろ試してみる。その1。 誰が得するのか謎だけど ActionView だけで slim を使うことを試みてみました。 action_viewを require して、 action_pack を require して、 slim を require すれば使えます。 用意したファイル views/prefix/slim.html.slim p | Hello, #{@name} views/layout/appliacation.html.erb -- &lt;%= yield %&gt; -- require 'action_view' require 'action_pack' require 'slim' lookup_context = ActionView::LookupContext.new('./views') lookup_context.cache = false # ActionPachk を読まなくて済む魔法 view_context = ActionView::Base.new(lookup_context) view_context.assign(name: 'eiel') ret = view_context.render(template: 'slim', prefixes: 'prefix', puts ret =begin -- &lt;p&gt;Hello, eiel&lt;/p&gt; -- =end slim は temple という gem を使ってRailsに対応してました。 ActionPack はバージョン確認に利用しているだけなので、ちょっといじればなんとかなりそうですけど。 Temple::Templates::Rails もう少し詳しく 誰得感がひどいのでもうちょっと書いてみる。 Railsとの連携の処理の部分は Temple::Templates::Rails(Slim::Engine, :register_as =&gt; :slim, # Use rails-specific generator.</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2014/07/28/action-view-with-slim/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2014/07/18/action-view/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2014 7月18日 18:35</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2014/07/18/action-view/">ActionView を単体で使ってみる</a></h1>
        <div class="summary">誰が興味があるのか謎ですが、ActionView を単体で使ってみようと思います。 意外にも Rails の仕組みとか見えてくるかもしれません。 Rails 4.1 ぐらいから ActionPack から独立した記憶があります。どうでしたっけ。 テンプレートを使いたい時には erb, haml, slim などを単体で利用すればいいのであまり使う機会はないかもしれません。 雑感では、 layout 機能を使いたい インスタンス変数で値にアクセスしたい Rails が提供するビューヘルパーを使いたい あたりがメリットかと思います。 この記事のために作成したコードはこちらにおいておきます。 補足の部分は読み飛ばせるように書いているつもりです。 利用したRailsのバージョンは 4.1.4 です。 1 Hello, world まずは使ってみます。 ActionView::Base.new.render(inline: 'Hello, World!') # =&gt; Hello, world ActionView::Base のインスタンスを作成し、renderメソッドを呼びだします。 コントローラでの render メソッドはどうやらこの render メソッドのようです。 (viewで使う render もこの render ですが…) 1の補足 ActionView::Base Rails を使ってる際に erb ファイルの中で self.class を確認したことはあるでしょうか？ ちょっと確認してみましょう。 &lt;%= self.class %&gt; &lt;%= self.class.superclass %&gt; #&lt;Class:0x007f82891092e0&gt; ActionView::Base self は無名のクラスになっていますが、そのスーパークラスは ActiovView::Base です。 ビューは ActionView::Base のインスタンスのコンテキストで実行されるわけです。ビューコンテキストと呼んでいるようです。 また、このクラスにヘルパーをミックスインすることでヘルパーとして利用できるようになります。 デフォルトのHelperはすでに include されています。 &gt; ActionView::Base.ancestors.map(&amp;:to_s).grep(/Helper/) =&gt; [&quot;ActionView::Helpers&quot;, &quot;ActionView::Helpers::TranslationHelper&quot;, &quot;ActionView::Helpers::RenderingHelper&quot;, &quot;ActionView::Helpers::RecordTagHelper&quot;, &quot;ActionView::Helpers::OutputSafetyHelper&quot;, &quot;ActionView::Helpers::NumberHelper&quot;, &quot;ActionView::Helpers::JavaScriptHelper&quot;, &quot;ActionView::Helpers::FormOptionsHelper&quot;, &quot;ActionView::Helpers::FormHelper&quot;, &quot;ActionView::Helpers::FormTagHelper&quot;, &quot;ActionView::Helpers::TextHelper&quot;, &quot;ActionView::Helpers::DebugHelper&quot;, &quot;ActionView::Helpers::DateHelper&quot;, &quot;ActionView::Helpers::CsrfHelper&quot;, &quot;ActionView::Helpers::ControllerHelper&quot;, &quot;ActionView::Helpers::CacheHelper&quot;, &quot;ActionView::Helpers::AtomFeedHelper&quot;, &quot;ActionView::Helpers::AssetTagHelper&quot;, &quot;ActionView::Helpers::AssetTagHelper::StylesheetTagHelpers&quot;, &quot;ActionView::Helpers::AssetTagHelper::JavascriptTagHelpers&quot;, &quot;ActionView::Helpers::SanitizeHelper&quot;, &quot;ActionView::Helpers::ActiveModelHelper&quot;, &quot;ActionView::Helpers::UrlHelper&quot;, &quot;ActionView::Helpers::TagHelper&quot;, &quot;ActionView::Helpers::CaptureHelper&quot;] 2 インスタンス変数を使う Rails ではコントローラのインスタンス変数がビューの中で使えます。 普段はRailsが自動でやってくれていますが、自分でインスタンス変数を設定するには assign メソッドを使います。 view_context = ActionView::Base.new view_context.assign(name: 'eiel') view_context.render(inline: 'Hello, &lt;%= @name %&gt;') # =&gt; Hello, eiel @name が eiel に展開されています。 ActionView::Base のコンストラクタの第2引数に渡しても設定できます。 2の補足 ActionView::Rendering コントローラがビューコンテキストに対して assign メソッドを利用して、設定します。 これは ActionView::Rendering で行われます。 この ActionView::Rendering には ActionController::Base にミックスインされていて、コントローラがビューを設定する処理などが記述されているようです。 &gt; ActionController::Base.ancestors.map(&amp;:to_s).grep(/ActionView/) =&gt; [&quot;ActionView::Layouts&quot;, &quot;ActionView::Rendering&quot;, &quot;ActionView::ViewPaths&quot;] ActionController::Base には ActionView::Rendering がミックスインされています。 ちなみに assign するのに使う Hash は AbstractController::Rendering#view_assign で作成されています。 def view_assigns protected_vars = _protected_ivars variables = instance_variables variables.reject!</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2014/07/18/action-view/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2014/05/16/rails-console-routeing-helper/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2014 5月16日 15:54</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2014/05/16/rails-console-routeing-helper/">rails console でルーティングが生成した helper を使う</a></h1>
        <div class="summary">Railsで config/routes.rb に resources :users とかくと users_path users_url user_path user_url new_user_path などなどのViewで利用できるヘルパーが生成される。 このヘルパーを rails console で使うには、app オブジェクトを経由する。 例 app.users_path # =&gt; &quot;/users&quot; app.users_url # =&gt; &quot;http://www.example.com/records/3.html&quot; app.user_path(User.first) # =&gt; &quot;/users/1&quot; app.user_path(User.first, :html) # =&gt; &quot;/users/1.html&quot; なんとなく関係ない例を混ぜた。 routing helper というらしいのに helper からアクセスできない。 関連リンク ActionDispatch ってなんだろう？ - 広島・岡山Ruby交流会01 - そんなこと覚えてない</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2014/05/16/rails-console-routeing-helper/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2014/02/20/confirmation-token-error-indevise/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2014 2月20日 14:00</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2014/02/20/confirmation-token-error-indevise/">Devise で登録時にConfirmation Token が不正な値というエラー</a></h1>
        <div class="summary">Devise で確認メールで確認してから有効にする機能 Confirmable の機能をつかってたのだけど、トークンが不正というエラーがおきた。 この問題は devise 3.1.0 より前で、確認のために送信されるメールの内容をカスタマイズしていれば起きてるんじゃないかと思う。 DBに格納される Token の値が HMAC されるようになったらしい。 Use HMAC on tokens stored in the DB · 143794d · plataformatec/devise · GitHub そのため、画面をカスタマイズしている場合、token の取得方法が変えないといけないっぽい。 -&lt;p&gt;&lt;%= link_to 'Confirm my account', confirmation_url(@resource, :confirmation_token =&gt; @resource.confirmation_token) %&gt;&lt;/p&gt; +&lt;p&gt;&lt;%= link_to 'Confirm my account', confirmation_url(@resource, :confirmation_token =&gt; @token) %&gt;&lt;/p&gt; 確認メールだけでなく app/views/devise/mailer 内のファイル全部変えないといけない気がする。 confirmation_instructions.html.erb reset_password_instructions.html.erb unlock_instructions.html.erb あたりですね。 蛇足 v3.1.0 ってリリースされたの9月なんだが…さっき気づいたということは…。とおもって Gemfie.lock を git log &ndash;patch Gemfile.lock して devise 検索したら、デプロイされたのは最近だった。 参考 直してから探したやつだけど。</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2014/02/20/confirmation-token-error-indevise/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2014/01/09/scope-proc/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2014 1月9日 16:42</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2014/01/09/scope-proc/">ActiveRecord のスコープを書くときは proc を使えよって話</a></h1>
        <div class="summary">ActiveRecord で scope を定義する時は、普通は以下のように書きますよね。 scope :hoge, -&gt; { where(name: 'hoge' } 歴史的背景で、 scope :hoge, where(hname: 'hoge') とか、書いてることがあるかもしれません。 この場合、一応、問題なく動きますが、コンテキストに応じて値が変化するようなものを利用してる場合には問題が起きることがあるので、早めに修正したほうが良いかもしれません。(というか問題が起きた) 前者で書きましょう。 具体例 特に日付などを利用してると問題になりやすいかもしれません。 例えば、 scope :this_month, where(month: Date.today.month) というのは、月を跨ぐと問題になる可能性が高いです。 常にデプロイした月の結果を返すことになります。 クラスをファイルを読み込みした際に Date.today.month が評価されてしまうので、そこの値が固定されてしまいます。 scope :this_month, -&gt; { where(month: Date.today.month) } という風に書き換えておいたほうが良いです。 年とか使ってると気づかない可能性高そうですね。怖い怖い。</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2014/01/09/scope-proc/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2013/12/25/wisper/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2013 12月25日 01:11</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2013/12/25/wisper/">Wisper 試した</a></h1>
        <div class="summary">Wisper を試した。 Rails のプラグインで、依存性の管理や分離ができる。 ActiveRecord の callback だと依存の記述がモデル上になって、 Observer は本家から外れたような気がするし(うる覚え)、 ActiveSupport::Notification じゃ依存性がゆるすぎる。 でも、コントローラでかくにはちょっと処理が多すぎるし…って時に探してたらみつけたプラグイン。 やってることはどれも大差ない気がするんだけど、とりあえず、公式のサンプルコードをみてみる。 class BidsController &lt; ApplicationController def new @bid = Bid.new end def create @bid = Bid.new(params[:bid]) @bid.subscribe(PusherListener.new) @bid.subscribe(ActivityListener.new) @bid.subscribe(StatisticsListener.new) @bid.on(:create_bid_successful) { |bid| redirect_to bid } @bid.on(:create_bid_failed) { |bid| render :action =&gt; :new } @bid.commit end end create_bid_successful が発生したときはリダイレクトして、create_bid_failed が発生した時は new を render するというのをアクションでかける。 ifの分岐がなくて、縦にコードが並んで複雑な分岐をする場合は読みやすい。 また、Listener を登録することで機能追加ができる。 create_bid_successful イベントがおきたときは、PusherLister#create_bid_successful や ActivityListener#create_bid_successful、StatisticsListener#create_bid_successful なんかも呼ばれる。 Set で保存されてるようなので順番は保証されない メインの処理をモデルで集中できて少し脇道に逸れるようなものは Listener を書いて subscribe</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2013/12/25/wisper/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2013/10/26/config-database/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2013 10月26日 00:34</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2013/10/26/config-database/">config/database.yml の情報にアクセスする。</a></h1>
        <div class="summary">Rails の config/database.yml の情報にアクセスしたかった。 別に open して read して YAML.parse するだけなのですが、 もしかすると、 config/database.yml じゃないところを読むように設定を変えてる場合もありますからね。(ねーよ) ということで適当にリポジトリを検索したら、 Rails.application.config.database_configuration で、取り出せました。 この辺りはバージョンよって違うかもしれないので、GitHub で検索するのが良いかもしれないです。</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2013/10/26/config-database/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2013/09/07/autoload-rails/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2013 9月7日 22:38</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2013/09/07/autoload-rails/">Rails の自動読み込みの話</a></h1>
        <div class="summary">広島Ruby勉強会 #034で使用したネタの文に書きなおしました。 「Rails の自動読み込み規約を支える技術」と若干煽っておりますが 以下の内容はソースコードを読んで判断したことですべて正しいとは保証できないので参考にする程度にお願いします。 というわけで、Rails の自動読み込みの話をしたいと思います。 Rails の自動読み込みを支える技術 from Tomohiko Himura ### Rails のファイル読み込みの規約 Rails には[設定より規約](http://ja.wikipedia.org/wiki/%E8%A8%AD%E5%AE%9A%E3%82%88%E3%82%8A%E8%A6%8F%E7%B4%84) という設計パラダイムが採用されています。 ファイルの自動読み込みの規約は 読み込みされていないクラス/モジュールがあった場合、名前から読み込みするファイルを判断できる というような規約があります。 例えば ``` Hoge - 'hoge.rb' を読み込む Hoge::Mogu - 'hoge/mogu.rb' を読み込む HogeMogu - 'hoge_mogu.rb' を読み込む ``` といった感じになっています。 この時、クラス名からファイル名の変換は `ActiveSupport::Inflector.underscore` が利用されます。 Rails では、自動読み込みは `RAILS_ROOT/app/models` のような `RAILS_ROOT/app/` の中のディレクトリに対し行われます。 `RAILS_ROOT/lib` とかに配置しても自動読み込みされません。 これを実現しているモジュールは [ActiveSupport::Dependencies](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/dependencies.rb) になります。 ### ActiveSupport::Dependencies Rails を使わない場合の使い方を紹介します。 ```ruby require 'active_support/dependencies.rb' ActiveSupport::Dependencies.autoload_paths LoadError: cannot load such file -- hoge/mogu ``` #### eager_autoload と auto_load!</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2013/09/07/autoload-rails/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2013/09/04/extend-abstract-controller/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2013 9月4日 19:03</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2013/09/04/extend-abstract-controller/">AbstractController を継承して遊ぶ</a></h1>
        <div class="summary">すごい広島 #16 で遊んだこと Rails で AbstractContrller::Base を継承して オレオレ コントローラ を作りたいと思います。 どうしてこれをしたいかというと View です。 コントローラ名とアクションに対応した View がレンダリングできるのが魅力的です。 状況としてはメールを送るわけではないので ActionMailer 使えないし、すぐに画面に表示するわけではないので ActionController はちょっと…という感じなわけです。 どんな状況かというとDBに保存する長文を作成したい時です。 書いたビューはこんな感じ。 こんにちは &lt;%= @user %&gt;さん &lt;%= goodbye_helper @user %&gt; ヘルパーも使えるようにしてみます。 ファイル名は app/views/hoge_template/goro.text.erb でコントローラ名が hoge_template アクション名 goro テンプレートエンジンは erb です。 利用には以下のように使います。 rails c の中でやったり、モデルの中で使えます。 もちろんコントローラ上でも。 template = HogeTemplate.new template.process(:goro) template.render renderの戻り値がテンプレートの出力結果になります。 最終的な出力目標は こんにちは おなまえさん おなまえさん、おやすみ を目指します。 @uesr には おなまえ が入っています。 goobye_helper はお別れのあいさつをしてくれるように実装します。 作成するコントローラ的な役割をする HogeTemplate はこのように書きたいはずです。 class HogeTemplate &lt; ActionTemplate</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2013/09/04/extend-abstract-controller/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2013/08/04/hiroshimarb-33/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2013 8月4日 12:22</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2013/08/04/hiroshimarb-33/">広島Ruby勉強会 #033 でやったこと - ActiveSupport CoreExt &amp; Rails Template</a></h1>
        <div class="summary">広島Ruby勉強会 #033 に参加しました。 前回に引き続き ActiveSupport のCoreExt のソースコードを読んだので、面白そうなところをざっくりと紹介しました。 資料 - Rails のソースコード読んだので面白そうなところを紹介する &ndash; ActiveSupport CoreExt編 その2 あと LT しました。 rails new には --template という引数があるのでこれについて調べました。 まずはスライド。 Rails プロジェクトでスタートダッシュを決める from Tomohiko Himura このスライドを作る前に調べものした時のメモは前回の記事を Rails New した時の追加処理をかく 参加者の もりしー こと @CentBoss が 「広島Ruby勉強会 #033に遊びに行ってrails newでのtemplateを作った」 早速試してみてくれました。 rails new する時のデフォルトの引数を指定できる ~/.railsrc というものがありますが、そのなかで &ndash;template が使えるのを試してくれています。 上手くいったようです。 ここでテンプレートファイルを指定しておくと、とても楽ができます。 次回の 広島Ruby勉強会は 9月7日を予定しているそうです。 発表の練習したい方募集中だそうです。</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2013/08/04/hiroshimarb-33/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2013/08/01/rails-new-template/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2013 8月1日 18:00</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2013/08/01/rails-new-template/">rails new した時の追加処理をかく</a></h1>
        <div class="summary">この記事はメモです。 広島Ruby勉強会 #33 で LT するのに下調べしたことを書いてるだけです。 rails new した時に --template file_or_url というオプションがあります。省略形は -m。 これを使うと、rails new した時に追加処理ができます。 「テンプレート機能」と呼びたいと思います。 何がしたいかというと rails new した時点で pry とか rspec とか cucumber とかいつも使うのを設定した状態にしたいのです。 ウェブサービスが思いついたら直ちに開発をしたいのです。 このテンプレート機能を使うものとしては Rails Composer というものがあります。 これを使うと、どのライブラリを利用するか質問されるので、回答していくと、雛形ができます。 これを自分でカスタマイズしたいので、いろいろ調べました。 役に立つかもしれないウェブページ Rails Application Templates - Rails Guide Creating and Customizing Rails Generators &amp; Templates - Rails Guide RailsのApplication templateを使って開発の初速をあげよう！ ひとつめの「Rails Application Templates」は Rails Guide ですが、Rails Guide のトップにリンクがありません。 だいぶ調べた後に気づきました。泣きたい。 ふたつめも Rails Guide ですが、機能的には Generator と同じなので参考になります。 みっつめは日本語記事。面白くまとめてあります。このメモを書いてLTをつくった後にみつけた。 つづいて、関係してきそうなクラスやモジュールを整理します。 Rails::AppBuilder Rails::Generators::AppGenerator Rails::Generators::AppBase Rails::Generators::Base Rails::Generators::Actions Thor::Actions Thor::Group Thor::Shell Thor::Invocation Thor::Base --template に指定したファイルは Rails::Generators::AppGenerator インスタンスのコンテキストで実行されます。 Rails::Generators::AppGenerator が継承してるクラスやミックスインしているモジュールのメソッドが使えると考えてください。 「instance_eval される」と書いたほうがわかりやすい人もいるとかもしれません。 rails new や rails generator には、Thor というライブリが使用されています。 bundler や Vagrant でも利用されているそうです。 もっと詳しいことを知りたいのであれば、 Github のリボジトリやWikiをみるとよさそうです。 Thor についてはまだ勉強中でまだよくわかりませんが、コマンドラインから実行するプログラムを作成するのを支援するようです。 継承関係は、 Rails::Generators::AppGenerator &lt; Rails::Generators::AppBase &lt; Rails::Generators::Base - [Thor::Actions, Rails::Generators::Actions] &lt; Thor::Group - [Thor::Base, Thor::Shell, Thor::Invocation] となっていて、 &lt; は継承しているところで - はミックスインしているところです。 Rails::AppBuilder には Rails::Generators::AppGenerator で使用するレシピが書いてある感じになっています。 Rails::Generators::AppGeneratorに定義されているメソッドは Thor::Group の規約により、定義された順番に実行されるようになっています。 --templateに指定したファイルが実行されるのは最後から二番目になります。 最後はrun_bundle が実行されます。これは bundle install が実行されます。 rails generator に対応したクラスのを多くは Rails::Generators::NamedBase を継承しています。 継承関係は Rails::Generators::NamedBase &lt; Rails::Generators::Base となっているので、両者に共通するものが Rails::Generators::Base になることがわかりました。 rails new する時の処理をまるまる変更したいのであれば Rails::AppBuilder を継承して::AppBuilder を作成すればできそうな感じでした。 ベースになるクラスは railties/lib/rails/generators にあります。 generatorとして利用できるものは、ここに配置されているディレクトリに配置されています。 ないものもありますが、rails g --help に表示されるものと概ね対応しています。 find -maxdepth 2 -type d .</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2013/08/01/rails-new-template/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2013/07/24/upgrade-exception-notification-4-dot-x/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2013 7月24日 10:47</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2013/07/24/upgrade-exception-notification-4-dot-x/">Exception Notification の 4.x 系へのアップグレード</a></h1>
        <div class="summary">Rails のプラグインである Exception Notification を gem upgrade したらエラーが起きた。 例外が発生したらメールを送信してくれるやつです。 最近は Errbit とかが流行りらしいです。 ブルジョワ層は Airbrake とか使うらしいです。 話が剃れた。起きたエラーは以下の通り。 undefined method `new' for ExceptionNotifier:Module 対処方法は公式に書いてある。 Upgrading to 4.x version - Exception Notification ミドルウェアの名前が ExceptionNotification::Rack に変更された 第2引数に :email という上位にキーが必要になった production モードじゃないと発生しないので、Jenkins などで rake assets:precompile して置かないと発見が deploy するまで遅れそうです。</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2013/07/24/upgrade-exception-notification-4-dot-x/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2013/07/20/not-in-on-rails/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2013 7月20日 15:53</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2013/07/20/not-in-on-rails/">Ruby on Rails で NOT IN な SQL をかく。</a></h1>
        <div class="summary">Rails 4 で NOT な条件をもつ WHERE 句 が非常に書きやすくなりました。 Rails 4 なら NOT IN な SQL も簡単に書けます。 User.where.not( name: [&quot;hoge&quot;,&quot;goro&quot;] ) 条件にリストを渡せばよいです。SQLは以下のようになります。 SELECT &quot;users&quot;.* FROM &quot;users&quot; WHERE (&quot;users&quot;.&quot;name&quot; NOT IN ('hoge', 'goro')) サブクエリも使えます。これが便利すぎて困る。 query = User.select(:name) User.where.not name: query SELECT &quot;users&quot;.* FROM &quot;users&quot; WHERE (&quot;users&quot;.&quot;name&quot; NOT IN (SELECT name FROM &quot;users&quot;)) Rails 3 の話 そうはいっても、Rails 4 にすぐには更新できないプロジェクトがあるので、これに慣れてしまうと非常につらい。折角なのでメモしておく。 where に文字列を渡す 格好悪いけど、とりあえずごまかす場合はこれを使う。 User.where(&quot;name NOT IN ('hoge', 'goro')&quot;) 文字列で渡す。 ? を使うとエスケープで泣きたくなるので、手軽には使えない。右辺も文字列で逃げます。 サブクエリを使うときは、こんな感じ。 query = User.select(:name) User.where(&quot;name NOT IN (#{query.to_sql})&quot;) SQLを直接書くしかない。複雑な query だとつらいので to_sql メソッドで逃げます。 squeel を使う Rails 3 だと NOT なSQL を書きづらいので、 squeel をよく使っています。 squeel を使っていればこんな風に書けます。 User.where { name &lt;&lt; [&quot;hoge&quot;,&quot;mogu&quot;] } where に ブロックで引数が渡せるようになって &lt;&lt; という演算子を使うと NOT IN になります。name はシンボルではないのも ポイントです。 ブロックで渡すので、スコープ内で name に値が束縛されているとそちらを参照してしまうので注意。 サブクエリも使える。素晴らしい。 query = User.select(:name) User.where { name &lt;&lt; query } squeel を使うと LIKE やら OUTER JOIN やらもできます。便利。 arel の世界へ行く arel で構築した sql を where に渡す方法がある。 squeel をインストールしたくない時に。 users = User.arel_table User.where( users[:name].not_in(['hoge','mogu']) ) arel 自体あまり解説してる人がいないのでなかなか勉強しにくいのが欠点。 わかってくるとなんとなくでも書けます。 サブクエリもいけます。 query = User.select(:name) users = User.arel_table User.where( users[:name].not_in(query.arel) ) ActiveRecord::Relation はそのまま渡せませんが arel メソッドで変換可能です。 まとめ Rails 4 の not 便利です。 squeel も良いです.</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2013/07/20/not-in-on-rails/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2013/05/04/rails4-assets/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2013 5月4日 00:44</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2013/05/04/rails4-assets/">rails4 で Asset の生成したいファイルの追加がうまいこといかなかった。</a></h1>
        <div class="summary">Rails4 を試していた。 1ページだけ全く違うデザインがあって js とか css を application.js とか application.css とは別に生成したかった。 ということで `config/environments/production.rb&rsquo; に config.assets.precompile += %w( hoge.js ) と書きました。 なぜか生成されない。Rails3 では間違いなく生成される。 調べてみたところ config/application.rb に書けば動くことがわかった。 それだけ。</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2013/05/04/rails4-assets/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2013/05/03/rails4-rc1-from-beta1/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2013 5月3日 01:36</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2013/05/03/rails4-rc1-from-beta1/">rails4 rc1 がリリースされたことだし beta1 からアップグレードしてみた</a></h1>
        <div class="summary">Rails 4.0 rc1 がリリースされてますね。軽いノリでアップグレードしてみたら余裕で起動しませんでした。 アップグレードするには Gemfile を以下の編集をしました。 -gem 'rails', '4.0.0.beta1' +gem 'rails', '4.0.0.rc1' gem 'pg' # Gems used only for assets and not required # in production environments by default. group :assets do - gem 'sass-rails', '~&gt; 4.0.0.beta1' - gem 'coffee-rails', '~&gt; 4.0.0.beta1' + gem 'sass-rails', '~&gt; 4.0.0.rc1' + gem 'coffee-rails', '~&gt; 4.0.0.rc1' あとは bundle update そんでもって起動すると下記のエラー。 gems/railties-4.0.0.rc1/lib/rails/application/configuration.rb:144:in `const_get': uninitialized consta nt ActionDispatch::Session::EncryptedCookieStore (NameError) CHANGELOG.mdには Automatically configure cookie-based sessions to be encrypted if secret_key_base is set, falling back to signed if only secret_token is set.</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2013/05/03/rails4-rc1-from-beta1/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2013/04/08/foreign-key-constrait-on-rails/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2013 4月8日 01:51</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2013/04/08/foreign-key-constrait-on-rails/">Rails で外部キー制約</a></h1>
        <div class="summary">外部キー制約は好きですか？ O/RマッパーしててもなるべくDBの力は借りたいです。 ということで、Ruby Toolboxで foreign を検索して、ちらちら見て一番人気のforeignerを選びました。基本的にはデータベースに丸投げなので Rails4 でもいまのとこ問題なく使えております。 インストールは Gemfile に: gem 'foreigner' と追加して bundle install あとはマイグレーションで: create_table :comments do |t| t.references :post, null: false, index: true t.foreign_key :posts, dependent: :delete end としておきました。 ついでに確認。 存在しない 外部キーを指定すると保存を失敗する確認。postgresの例: Comment.create(post_id: 1) # =&gt; PG::Error: ERROR: insert or update on table &quot;comments&quot; violates foreign key constraint &quot;comments_post_id_fk&quot; キーを指定して、親になるオブジェクトを削除すると消える確認: Comment.create(post_id: Post.create) Comment.count # =&gt; 1 Post.count # =&gt; 1 Post.first.destroy Post.count # =&gt; 0 Comment.count</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2013/04/08/foreign-key-constrait-on-rails/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2013/04/03/render-text-ajax-on-rails/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2013 4月3日 19:49</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2013/04/03/render-text-ajax-on-rails/">Rails で ajax をちょっと実験するときに `render text:` すると コールバックしてこない。 </a></h1>
        <div class="summary">サンプルコードがなくて申し訳ないです。 rails で ajax を使用とすると 一般的には jquery-ujs を利用します。 あるリンクをクリックする時に非同期に読込みたい場合は &lt;%= link_to 'hoge', @user, class: user-link %&gt; に対して、 remote: true を追加します。 &lt;%= link_to 'hoge', @user, remote: ture, class: user-link %&gt; といった感じになります。 あとはサーバからのレスポンスが返ってきた時の処理を書きましょう。 $(function () { $(document).on('ajax:success', '.user-link', function (ujs, content, status, xhr) { $('#user-info').html(content); }); }); 少し説明不足ですが、気にせず。 さて、ここで リンク先が未実装で手抜きして: class UsersController def show render text: 'hoge' end end と、さくっと実装しちゃうと さきほど実装した javascript の コールバックが呼ばれません。 めんどくさがらずに、 app/views/users/show.htmle.rb などを作成してあげましょう。 そんなこと滅多にないか…。</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2013/04/03/render-text-ajax-on-rails/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2013/02/27/rails4.0-beta/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2013 2月27日 14:32</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2013/02/27/rails4.0-beta/">Rails4 beta1 がリリースされたのでアップグレードしてみた</a></h1>
        <div class="summary">Rails4 beta1がリリースされてます。 というわけで、アップグレードしてもよさそうなプロジェクトをアップグレードしてみました。(リリースしてないし) config以下の書き換えなどは自己責任で。 やったこと bundler 1.3 が必要になるので、まだいれていない場合アップデートします。 $ gem install bundler Gemfileを修正します。 gem 'rails', '4.0.0.beta1' group :assets do gem 'sass-rails', '~&gt; 4.0.0.beta1' gem 'coffee-rails', '~&gt; 4.0.0.beta1' # See https://github.com/sstephenson/execjs#readme for more supported runtimes # gem 'therubyracer', :platforms =&gt; :ruby gem 'uglifier', '&gt;= 1.0.3' end 必要に応じてgemの設定 protected_attributes strong_parameters に移行してない場合 gem 'protected_attributes' devise devise がまだ対応 gem がないので gem 'devise', github: 'plataformatec/devise', branch: 'rails4' githubから直接。 simple_form gem 'simple_form', '3.0.0.beta1' simple_form が rails4</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2013/02/27/rails4.0-beta/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2013/02/11/start-turbolinks/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2013 2月11日 01:14</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2013/02/11/start-turbolinks/">今さらながら turbolinksを試した。- 感想</a></h1>
        <div class="summary">今さらながら Rails4 の新機能の一つである turbolinks を試してみました。 解説なんかは僕がするよりも様々な記事がもうあるので、あまり必要ないと思います。 Rails 4.0 に入る予定の turbolinks について調べた Rails4 Turbolinksのメモ #mtsmhack Rails4でデフォルトで入るturbolinksがオープンリダイレクタと合わさると何でもできてかなり危険 どれも良い記事でした。 ということで、個人的感想とか production環境より development環境での効果が高い気がした 体感ほんとに早い - development環境 だいたいそのままで動く。動かなくなる Javascriptはやっぱりある。 fancyboxとか、でも、そういうのはそもそもRailsで扱いずらいものばかり。 CSSやJavaScriptが切り変わるリンクには HTMLタグに data-no-turbolink属性をいれればよい。いれないと悲しいことになります。 インストール 一緒に jquery.turbolinks も入れておきました。 これは簡単に言うと、&rdquo;なにもしなかったら動かなくなってしまうもの&rdquo;を減らすように工夫したものだと思います。 なんとなくで具体的に書くと、readyイベントでやってることをページロードするときにも実行するようにするんじゃないかと思います。(たぶん) jquery.turbolinks は turbolinks に依存してないのでそれぞれGemfileに入れる必要がありました。 gem 'turbolinks` gem 'jquery-turbolinks' //= require turbolinks //= require jquery.turbolinks といった感じです。 感想をもうちょっと 体感ほんとに早い Rails3 でも試せるので、体感しておくのは良いと思います。設定はとても簡単なので、どういうものかは知っておいたほうが今後の方針に役立ちます。 個人的には、規模が大きいプロジェクトでは develpoment 環境でだけでも使いたいです。 動かなくなったプラグイン 試したプロジェクトは fancybox という jQueryプラグインが使用されてる箇所がありましたが、ここが動かなくなりました。 そもそも、Railsではこれはすごく扱いにくくて置き換えてやろうしてる部分で放置してるうちに次々と使われてしまってる問題児です。 修正するにはちょうどよい機会。 まとめ Rails的じゃないところほど問題がでやすい機能という点ですごく面白いなー。と、思いました。</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2013/02/11/start-turbolinks/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2013/01/27/capybara-link-or-button/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2013 1月27日 00:12</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2013/01/27/capybara-link-or-button/">Cucumber の Capybara で 複数の同じ名前のリンクに対応するステップ</a></h1>
        <div class="summary">Cucumber のステップで もし /^&quot;(.+)&quot;をクリック$/ do |name| click_on name end というステップを書いていますが、name に複数マッチしてしまうとエラーが発生しています。同じ名前にならないようにすればいいのですが、そうもいかない場合もあります。結局、以下の方法を用意しました。 もし /^(\d+)番目の&quot;(.*?)&quot;をクリック_$/ do |n, name| n = n.to_i - 1 all(:link_or_button, name)[n].click end 何番目のリンクか指定することで回避しました。 もうちょっと詳しく click_buttonと同じことをやろうとすると find(name) や all(name) ではうまくいきません。調べてみると XPath::HTML.link_or_button というメソッドを使用して、findに渡すXPathを生成してることがわかりました。。 これをどうやって使うというと all の第一引数に使えばいいことがわかりました。 さらに詳しく page.class # =&gt; Capybara::Session click_onメソッドやallメソッドのレシーバである page オブジェクトは Capybara::Session でした。pry で調べました。 Capybara::Session NODE_METHODS = [ :all, :first, :attach_file, :text, :check, :choose, :click_link_or_button, :click_button, :click_link, :field_labeled, :fill_in, :find, :find_button, :find_by_id, :find_field, :find_link, :has_content?, :has_text?, :has_css?, :has_no_content?, :has_no_text?, :has_no_css?, :has_no_xpath?, :resolve, :has_xpath?, :select, :uncheck, :has_link?, :has_no_link?, :has_button?, :has_no_button?, :has_field?, :has_no_field?, :has_checked_field?, :has_unchecked_field?, :has_no_table?, :has_table?, :unselect, :has_select?, :has_no_select?, :has_selector?, :has_no_selector?, :click_on, :has_no_checked_field?, :has_no_unchecked_field?, :query, :assert_selector, :assert_no_selector NODE_METHODS.each do |method| define_method method do |*args, &amp;block| @touched = true current_node.send(method, *args, &amp;block) end end https://github.com/jnicklas/capybara/blob/2.0.2/lib/capybara/session.rb#L338-L343 これらの メソッドは動的に生成されるようです。 def current_node scopes.last end def scopes @scopes ||= [document] end https://github.com/jnicklas/capybara/blob/2.0.2/lib/capybara/session.rb#L351-L358 current_node は document という変数に格納されたオブジェクトのようです。 def document @document ||= Capybara::Node::Document.new(self, driver) end https://github.com/jnicklas/capybara/blob/2.0.2/lib/capybara/session.rb#L334-L336 documentは Capybara::Node::Document クラスのインスタンスだとわかりました。 class Document &lt; Base https://github.com/jnicklas/capybara/blob/2.0.2/lib/capybara/node/document.rb#L11 ここには all メソッドがなく Capbyra::Node::Base を継承しているようです。 include Capybara::Node::Finders https://github.com/jnicklas/capybara/blob/2.0.2/lib/capybara/node/base.rb#L27 この辺にありそうですね。 def click_link_or_button(locator) find(:link_or_button, locator).click end alias_method :click_on, :click_link_or_button https://github.com/jnicklas/capybara/blob/2.0.2/lib/capybara/node/actions.rb#L12-L15 cloick_on みつけました。このあたりを grep でみつけた時点で all :link_or_button でいけそうなのはわかります。 def all(*args) query = Capybara::Query.new(*args) elements = synchronize do base.find(query.xpath).map do |node| Capybara::Node::Element.new(session, node, self, query) end end Capybara::Result.new(elements, query) end https://github.com/jnicklas/capybara/blob/2.0.2/lib/capybara/node/finders.rb#L110-L118 all みつけたー!</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2013/01/27/capybara-link-or-button/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2013/01/25/has-many-scope/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2013 1月25日 00:34</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2013/01/25/has-many-scope/">ActiveRecord の has_many で生成されるメソッドってActiveRecord::Relationに変換できる配列なんですね。</a></h1>
        <div class="summary">タイトルのとおりなんですが、ArticleとComment とかあったりして、ちゃんと設定をしておくと article.comments とやると あるArticleに紐づいているCommentがとってこれる機能です。 まず、結論からいうと article.comments.to_sql とか article.comments.scoped とか article.comments.joinsとかできる!! ということです。 article.comments.create ってかける時点でうすうす思ってたんですが、これがわかっていると小回りがききます。返しているものが ActiveRecord::Relationのようなものです。classを確認すると Arrayって言われちゃいますが。 もうちょい深く 以下のクラスがあることを想定してみます。 class Article &lt; ActiveRecord::Base has_many :comments end class Comment &lt; ActiveRecord::Base belongs_to :artcile belongs_to :user end class User has_many :comment end さきほど紹介した技を紹介すると User.first かつ Article.first な Commentを探す場合、以下のように書けます a = Article.first u = User.first a.comments.merge(u.comments.scoped) すると、こんな SQLができます。 SELECT &quot;comments&quot;.* FROM &quot;comments&quot; WHERE &quot;comments&quot;.&quot;article_id&quot; = 1 AND &quot;comments&quot;.&quot;user_id&quot; = 1 aとかuとかを引数な関数を用意するとウハウハな気がしてこないでしょうか。 joinだってできます。 a =</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2013/01/25/has-many-scope/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2013/01/19/rake-note-on-rails/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2013 1月19日 11:35</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2013/01/19/rake-note-on-rails/">Rails の rake notes というタスクをいまさらしった。</a></h1>
        <div class="summary">Rails Guide 読んでたら notes というタスクがあるのを知りました。 コードのコメントに TODO とか FIXME, OPTIMIZE といったコメントをみつけて表示してくれます。 grep すればいいやとか思いますが、それなりの便利そうです。jenkins なんかで回してレポートに出すのもよいかもしれません。 $ roke notes app/controllers/admin/users_controller.rb: * [ 20] [TODO] any other way to do this? * [132] [FIXME] high priority for next deploy app/model/school.rb: * [ 13] [OPTIMIZE] refactor this code to make it faster * [ 17] [FIXME] notes:custom というタスクもあるようです。 もう少しつっこんでみよう タスクのソースコードがここになります。 notes:custom では 環境変数 ANNOTATION で表示するキーワードを決められるようです。 notesの場合は &ldquo;OPTIMIZE&rdquo;, &ldquo;FIXME&rdquo;, &ldquo;TODO&rdquo; の3つか使用されていますね。 あと 動的にタスクを生成しているようなのでnotes:todo optimize fixme</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2013/01/19/rake-note-on-rails/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2012/12/30/modify-email-on-devise/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2012 12月30日 14:41</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2012/12/30/modify-email-on-devise/">Devise で email 変更する。</a></h1>
        <div class="summary">Railsの plugin で 認証を行なう devise という gem があります。 このユーザ認証で 実際にユーザにメールを送信して、登録を完了するという機能を提供するのに confirmable という機能があります。 このConfirmableという機能を使用していると管理者が ユーザのメールアドレスを変更してあげる必要がある場合、代えるときもメールがユーザに送信されます。これが便利なときもあったりテスト時にこまったりすることがあります。 devise :confirmable した モデルには skip_confirmation! skip_reconfirmation! というメソッドが追加されてるので、これらを呼び出すことで回避することができます。 ちなみに、これらのメソッドの中身をみると def skip_confirmation! self.confirmed_at = Time.now.utc end def skip_reconfirmation! @bypass_postpone = true end となってます。 confirmed_at に値がはいっていれば有効で、@bypass_postpone が true で メールの送信が回避できそうですね。このあたりの実装はversionによって変更される恐れがあるので直接利用するには注意が必要です。</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2012/12/30/modify-email-on-devise/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2012/12/30/activerecord-association/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2012 12月30日 13:50</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2012/12/30/activerecord-association/">ActiveRecordで関連レコードの自動保存</a></h1>
        <div class="summary">ActiveRecordで has_one なんかで関連づけしている場合、関連モデルを保存しわすれる。 そもそも、関連してることをドメインロジック上からは隠蔽したい。そんなときは autosave オプションが使えます。 関連するモデルが Information の場合、 has_one :information, autosave: true となります。 informationで親のモデル IDを validate presence かけてたらはまったことも一応メモしておきます。</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2012/12/30/activerecord-association/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2012/12/27/zeus-test-twice/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2012 12月27日 18:05</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2012/12/27/zeus-test-twice/">zeus test で スペックを実行すると 2度実行されてしまう</a></h1>
        <div class="summary">zeus test で spec を走らせるとなぜかスペックが2度実行されるようになっていた。 spec/spec_helper.rb 内の require 'rspec/autorun' を削除すると治るようです。 spork で実行してみたり、 rake spec したりもしてみたけど、消したから起きている問題は今のところないです。 追記 zeus rake spec したときに DB がリセットされてなくて上手く動いてないことがわかった。全件まわしたい場合は rake spec を使用してたので気がつかなかった。 参考 https://github.com/burke/zeus/issues/180</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2012/12/27/zeus-test-twice/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2012/12/17/read-attribute-activerecord/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2012 12月17日 16:57</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2012/12/17/read-attribute-activerecord/">read_attributeの存在を知らなかった、死にたい - rails</a></h1>
        <div class="summary">Railsの ActiveRecordで レコードの属性にアクセスする際は動的に生成されたメソッドを使いますが、そのようなメソッドを上書きしている場合、値に直接アクセスする必要があります。このような属性情報は @attributes に保存されています。 /lib/active_record/attribute_methods.rbに定義されてる attributes メソッドを経由してアクセスしていましたが、なんとなく @attributes へ直接アクセスするだけかとおもってたのですが、違ったようです。 def attributes attrs = {} attribute_names.each { |name| attrs[name] = read_attribute(name) } attrs end という定義になってました。 attribute_names は文字列で属性の一覧を返すので @attributesは 普通のHashでキーが文字列です。 もし email というの属性にアクセスしたい場合は attributes[&quot;email&quot;] になります。 attributes[:email] ではアクセスすることができません。 しかし、 read_attributeは シンボルでも文字列でも使用することができて、 read_attribute :email でも read_attribute &quot;email&quot; のどちらでも良いみたいです。 ちなみにエイリアスがあって [] メソッドになります。なので self[:email] などでアクセスできます。pubilcメソッドです。 read_attribute があるということはも write_attribute もあります。 ついでにもう少し深追い read_attributeの実装もついでにおってみると def read_attribute(attr_name) self.class.type_cast_attribute(attr_name, @attributes, @attributes_cache) end となってました。クラスメソッドを経由するようです こいつも中身を追うと def type_cast_attribute(attr_name, attributes, cache = {}) #:nodoc: return unless attr_name attr_name = attr_name.to_s if generated_external_attribute_methods.method_defined?(attr_name) if attributes.has_key?(attr_name) || attr_name == 'id' generated_external_attribute_methods.send(attr_name, attributes[attr_name], attributes, cache, attr_name) end elsif !attribute_methods_generated?</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2012/12/17/read-attribute-activerecord/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2012/12/13/view-source-map/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2012 12月13日 14:35</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2012/12/13/view-source-map/">ViewSourceMap が地味に役に立つ</a></h1>
        <div class="summary">ViewSourceMapというのが地味に役に立ちそうなので導入してみた。 部分テンプレートを render して出力された前後にどの view をレンダーしたのかHTMLのコメントを挿入してくれる。 &lt;!-- BEGIN app/views/users/_form.html.haml --&gt; &lt;form /&gt; &lt;!-- END app/views/users/_form.html.haml --&gt; ついでに、partial以外のレイアウトとかメインのビューとかもついでに出力してみるのもありかなと思ったりもするけど、その辺は明確だし、時間ができたら fork してみよう ソースコードも短いしRails の plugin 的なものを作ってみたいときにも参考になりそうでした。 https://github.com/r7kamura/view_source_map</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2012/12/13/view-source-map/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2012/12/10/ruby-2-dot-0-0-preview2/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2012 12月10日 13:49</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2012/12/10/ruby-2-dot-0-0-preview2/">ruby 2.0.0-preview2 をいれて rails起動してみた</a></h1>
        <div class="summary">ruby 2.0.0-preview2 が出てるのでビルドして rails を起動してみた。 $ uname -v Darwin Kernel Version 12.2.1: Thu Oct 18 16:32:48 PDT 2012; root:xnu-2050.20.9~2/RELEASE_X86_64 preview1のときと同様にopenSSLがついてこないので、OpenSSLを一緒にビルドするようにrbenvを修正しました。[https://github.com/eiel/ruby-build/tree/2.0.0-preview2-with_openssl] bundle instalの実行で ~/.rbenv/versions/2.0.0-preview2/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require&rsquo;: cannot load such file &ndash; rubygems/format (LoadError) と出てしまいますが rubygemsのライブラリ構成が変わっててbundlerが動かないだけみたいなので、 $ gem install bundler --version &quot;&gt;= 1.3.0.pre2&quot; として 1.3 系の gem をいれました。 あとは普通に rails が起動できました。</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2012/12/10/ruby-2-dot-0-0-preview2/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2012/11/22/rails-tag-helper/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2012 11月22日 10:35</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2012/11/22/rails-tag-helper/">TagHelperっていうのがあるんだけど、周りの人が使ってない - Rails</a></h1>
        <div class="summary">Railsのhelperに TagHelper っていうのが text_area_tag のようなフォームを作成するような Helper がありますが、その内部で使用するようなメソッドが定義されています。 主に tag, content_tag になるのですが、自分でHTMLのタグを生成するようなヘルパーを生成したときこれを使うと便利です。 例えば hoge的なものを表現するタグを生成するhoge_tagという抽象化をしたいときにざっくりな実装をすると以下のようになります。 def hoge_tag(content) %Q{&lt;div class=&quot;hoge&quot;&gt;#{content}&lt;/div&gt;}.html_safe end hoge_tag &quot;hogehoge&quot; # =&gt; &quot;&lt;div class=\&quot;hoge goro\&quot;&gt;hogehoge&lt;/div&gt;&quot; しかし、つかっていくと個別に class属性を追加したくなる場合が多々ありますし、content の escape などもしないといけないです。 def hoge_tag(content, *classes) classes = [&quot;hoge&quot;] + classes class_string = classes.join(&quot; &quot;) %Q{&lt;div class=&quot;#{class_string}&quot;&gt;#{content}&lt;/div&gt;}.html_safe end hoge_tag &quot;hogehoge&quot;, &quot;goro&quot; # =&gt; &quot;&lt;div class=\&quot;hoge goro\&quot;&gt;hogehoge&lt;/div&gt;&quot; もちろん、class属性だけじゃなくていろいろ指定したくなります。 text_area_tag なんかと同じようにoptionsで受けるようにしたい。こうなっとときに 「ソースを読もう!!」 という発想が出るようになると良いと思います。 def hoge_tag(content, options = nil) classes = options[:class] classes = [classes] unless</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2012/11/22/rails-tag-helper/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2012/11/18/activesupport-concern2/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2012 11月18日 23:42</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2012/11/18/activesupport-concern2/">ActiveSupport::Concern - Railsのソースとか読みはじめた 2</a></h1>
        <div class="summary">ActiveSupport::Concern - Railsのソースとか読みはじめたの続きになるのですが、 @netwillnet さんに。 ActiveSupport::Concernはモジュールが少しだけ書きやすくなるというメリットよりも、複数のモジュール同士に依存関係があったときにモジュール内でその依存関係をうまく解消させられるところに真価があるのでは https://twitter.com/netwillnet/status/270150759335723008 と素敵な突っ込みを頂いたので、rdocとソースコードと睨めっこしてきました。 睨めっこした結果の結論を書きたいと思います。 というわけで A -&gt; B -&gt; C という依存性があるモジュールを考えます。A には B が必要で。 B には C が必要という意味です。 module C def c &quot;c&quot; end end module B include C def b &quot;b&quot; + c end end class A include B def a &quot;a&quot; + b end end A.new.a と実行すると &quot;abc&quot; と出力されます。 これと同じことをクラスメソッドで実現しようとしてみます。 module C2 def c &quot;c&quot; end end module B2 def b &quot;b&quot; +</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2012/11/18/activesupport-concern2/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2012/11/16/rails-329-default-scope/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2012 11月16日 15:05</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2012/11/16/rails-329-default-scope/">Rails 3.2.9 で default_scopeに設定してる条件が属性の初期値になるらしい</a></h1>
        <div class="summary">あるプロジェクトでrails 3.2.9 にアップデートしたら テストが失敗しまくる。そのひとつに ActiveRecordの default_scope を使ってる部分に問題があるとわかった。 どんなエラーかと言いますと。 NoMethodError: undefined method `to_i' for [1, 2, 3]:Array from activerecord-3.2.9/lib/active_record/connection_adapters/column.rb:178:in `value_to_integer' [1, 2, 3] とか即値すぎて わけがわからないよ という感じだったんですが、いろいろ調べると class User &lt; ActiveRecord::Base default_scope proc { where(state_id: [1, 2, 3]]) } end というコードがあったときに User.new すると発生することがわかりました。 仕方ないので、 class User &lt; ActiveRecord::Base scope :valid, proc { where(state_id: [1, 2, 3]]) } end として、ひたすら置換しまくりでした。 僕はdefault_scope使わない派なのであまり気にしない方向で。 ちなみに class User &lt; ActiveRecord::Base default_scope proc { where(state_id: 1,name: &quot;hoge&quot;) }</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2012/11/16/rails-329-default-scope/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2012/11/14/activesupport-concern/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2012 11月14日 11:59</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2012/11/14/activesupport-concern/">ActiveSupport::Concern - Railsのソースとか読みはじめた</a></h1>
        <div class="summary">Railsのソースをちょろちょろ読むようにしている。読んで学んだことをメモしておきたい。だいたい読んだ当時の最新リリースを参考にします。 ActiveSupport::Concern を読みました。 このモジュールはモジュールの定義を手助けします。 クラスメソッドの定義場所をルール決めして include するだけで済むようにしたり、クラスのコンテキストで実行したい処理を書く場所を用意してくれます。 具体的にいきます。 以下のコードがあったとします。 class ConcernSample attr_accessor :hoge def self.mogu &quot;mogu&quot; end def goro &quot;goro&quot; end end これを以下のようにするだけで同じ機能を提供できるようにしたいと思います。 class ConcernSample include Sample end 処理を Sample モジュールにまとめたいということです。 これができると class ConcernSample include Sample end class ConcernSample2 include Sample end class ConcernSample3 include Sample end と、似たような機能をもつクラスを量産できます。 クラスに機能を追加するのが簡単になるという視点を持つとよいでしょう。 さて、Sample はどのように書くかということです。 ここで ActiveSupport::Concern を利用します。 require 'active_support' module Sample extend ActiveSupport::Concern included do attr_accessor :hoge end module ClassMethods def mogu &quot;mogu&quot;</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2012/11/14/activesupport-concern/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2012/11/07/cucumber-xml/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2012 11月7日 15:27</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2012/11/07/cucumber-xml/">cucumber で表示した画面がXMLを出力しているか確認する</a></h1>
        <div class="summary">rspec でマッチャーがあればよいのですが、とりあえず心当たりがなかったので、適当にごまかしました。良いgemがあれば紹介して欲しいです。 page.source が サーバからの出力を返してくださるので、これを Nokogiri で parse させてエラーがないかどうかで確認しました。 ならば /XMLを出力する/ do errros = Nokogiri::XML(page.source).errors expect(errors).to be_empty end どうせなら下記のように書きたいですね。 ならば /XMLを出力する/ do should render_xml end マッチャーを書いてみます。 RSpec::Matchers.define :render_xml do match do |actual| Nokogiri::XML(actual.source).errors.empty? end end ほとんどそのままです。matcher つくるのは難しくないので気軽に作りたいです。 少しだけ解説。 y cucumberの中では subject を省略した場合は page になります。なので、 ならば /XMLを出力する/ do page.should render_xml end と書いたのと等しいです。なので、acutual には page オブジェクトがバインドされていますので、そこから source を取り出してチェックします。page オブジェクトには html というメソッドが存在しますが、ブラウザが解釈したあとのDOMをdumpしたような感じになってるので期待通りの動きをしませんでした。</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2012/11/07/cucumber-xml/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2012/10/13/zeus/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2012 10月13日 11:52</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2012/10/13/zeus/">Railsによる開発にはzeusが新たな定番になりそう。</a></h1>
        <div class="summary">rails c や rake spec ってすごく時間がかかる。それをできるだけ早くするプロダクトはいままでにもいろいろありました。rails-shとかsporkとか。 そんな中zeusというのが最近登場したみたいです。gem install zeusu でインストール。Gemfileに書いてもいいそうですが、かかなくて良いようです。 あとは RAILS_ROOTで zeus init して zeus start しておけば、あとは別の端末で zeus c や zeusu sとして使うだけです。ファイルを変更すると認識して再読込します。zeus initした際にzeus.jsonが生成されます。 変更箇所に応じて必要なところからforkしなおすような挙動をしているように見えます(よくわかっていません) cucumberやrspecも認識して zeusu cucumber や zeusu spec というものも用意してくれます。 まだ使い込んでいませんが、イノベーションを感じるのでしばらく使ってみようと思います。</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2012/10/13/zeus/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2012/08/31/capistrano-and-database-dot-yml/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2012 8月31日 11:15</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2012/08/31/capistrano-and-database-dot-yml/">database.ymlが.gitignoreに入っている環境でのcapistranoを使ったデプロイ</a></h1>
        <div class="summary">[2012-09-20日追記] 以下の記事の内容ですが、gemが用意されてました。 https://github.com/amfranz/capistrano_database_yml Railsプロジェクトで、ひとりで開発している場合は除いて、.gitignoreにconfig/database.ymlを追加することがよくよくあります。この場合、config/database.ymlをどこかのタイミングで作ってやらなければなりません。この対処法はこの記事で説明されてます。 概略 英語だったりするので簡単に説明をかいておきます。 前述の記事の作業を行うとcapコマンドにふたつのタスクが追加されます。 cap db:setup cap db:symlink db:setupはshared_pathにconfig/database.ymlに生成してくれます。すでにあると上書きされるので注意が必要です。 db:symlinkは db:setupで生成したconfig/database.ymlへsymlinkを貼ります。なので、#{shared_path}/config/database.yml手で編集しておけば良いということになります。 試したときに困ったことなど 記載されているコードをコピーして、capistrano_database.rbを作成するのですが、このファイルをどこに作成すべきなのか記述されていないので、lib上に作成しました。 libはLOAD_PATHが通ってないのに気付かなくて迷惑をかけました。 config/deploy.rbに require &quot;capistrano_database&quot;とするところをrequire &quot;./lib/capistrano_database&quot;として回避しました。 ところが、cucumberの実行時のオプションに--require libをつけているせいだと思いますが、cucumberの実行時に読み込まれてしまい不具合がでてしまったので、 Capistrano::Configuration.instance.load do .... end の部分を if instance = Capistrano::Configuration.instance instance.load do ... end end のように変更して回避しました。</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2012/08/31/capistrano-and-database-dot-yml/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2012/08/09/rspec-for-rails-controller/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2012 8月9日 23:42</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2012/08/09/rspec-for-rails-controller/">Railsでコントローラのスペックを試行錯誤中</a></h1>
        <div class="summary">Rspec書いてますか？最近なかなか荒れ気味ですが、僕はなんだかんだで嫌いじゃないです。 コントローラのテストは何をすべきかなかなか難しいです。 こんな感じでどうかなーというのを一応紹介しておきます。 何をテストするか 基本的には rspec を走られせるとこのコントローラが何をするのかわかるようにすることです。 どのアクションがどのHTTPメソッドを受けるのか どんな変数をビューに渡すのか リダイレクトするのか、しないのか どんなflashが設定されるのか 前提とする状況はなにか といったあたりがわかるようにしています。 どのアクションがどのHTTPメソッドを受けるのか これは単純にdescribeにかくだけですが、コード上ではlet式を利用して request という変数にバインドしてちょっとだけ目立つようにしています。 どんな変数をビューに渡すのか ビューに渡す値はインスタンス変数に入れますが、どの変数にどんな型の値が入るのかテストしています。 ビューを先にかくことが多いのでその際にpendingにして追加していくとコントローラかくときにビューの確認をする必要がありません。 あと、before_filterのようなものを利用しているの、その中で勝手にバインドするものがあるのでこれを明確にしてやったりします。 リダイレクトするのか、しないのか 対応するビューがあるのかないのか、うまくいくのどこの画面にいくのかが明確になるのでかいておきます。 どんなflashが設定されるのか これは変数の場合とだいたい一緒です。ビューではなく cucumber でのテストとの橋渡しな感じもあります。私はcucumberでは成功したらこの値が出てるのか確認してます。 前提とする状況はなにか ログインしている場合なのか、とかです。contextのブロックが増えるだけです。 それらを踏まえて上での雛形 コメントは解説のために。 describe HogeController do subject { request } describe &quot;GET 'index'&quot; do let(:request) { get :index, params } let(:params) { { hoge: &quot;mogumogu&quot;} } context &quot;ログインしている時&quot; do include_context &quot;ログイン&quot; # リダイレクトなどしない場合 it { should be_success } context &quot;リクエストした時&quot; do #</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2012/08/09/rspec-for-rails-controller/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2012/08/01/active-recode-scoped/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2012 8月1日 11:37</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2012/08/01/active-recode-scoped/">ActiveRecordで今のスコープをそのまま返したい</a></h1>
        <div class="summary">あるオプションパラメータがあるかどうかで、条件が変わるような処理を書いてると、オプションがない場合、ActiveRecord::Relationが欲しくなるような場面があります。 例えば @articles = Article @articles = @articles.where(valid: true) if params[:valid] みたいな感じになっちゃって@articles = Articleって何?な状態になります。 メソッド化しようとするとさらに困るのですが、scopedを使うと以下のように書けるようです。 @articels = Article.scoped @articles = @articles.where(valid: true) if params[:valid] なんか異臭がしなくなりましたね。 だから、どうした？って思う方もいるかもしれませんがメソッド化すると、 def self.valid(is_valid = nil) scoped.where(valid: true) if is_valid scoped end となります。scopedなしで書かこうとするとちょっと困ります。 そんだけ。</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2012/08/01/active-recode-scoped/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2012/07/12/render-on-filter-ror/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2012 7月12日 15:22</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2012/07/12/render-on-filter-ror/">Ruyb on Railsにて render を before_filterとかafter_filterで読んだら酷い目にあった</a></h1>
        <div class="summary">コントローラ内デいろんなところで同じrenderを書いてたのでリファクタリングしようと思った。 そんなわけで after_filter を利用して render を呼んでみましたが、actionの処理がすでに終了してるようで、 renderは一度呼んでるよ! って怒られました。 仕方なく before_filter で呼んだら、action内に入る前にレンダリングしてしまって、@hogehoge がnilやねーんって怒らました。 とりあえず、あきらめることにしました。</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2012/07/12/render-on-filter-ror/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    <article class="post">
    <div class="eyecatch">
        
        <a href="https://blog.eiel.info/blog/2012/06/22/rspec-html-matchers/"><img src="https://blog.eiel.info/images/nopicture.png" alt="no_picture"></a>
        
    </div>
    <div class="data">
        <span class="post-date">2012 6月22日 18:04</span>
        <h1 class="post-title"><a href="https://blog.eiel.info/blog/2012/06/22/rspec-html-matchers/">Rspecマッチャー rspec-html-matchersを試してみてる</a></h1>
        <div class="summary">Ruby on Railsで ViewやHelperの Specを書く際に利用するマッチャーに良いのがないか探してます。現在のRspecはcontainぐらいしかないので、細かくチェックしたい場合は若干使いづらいです。というわけで、rspec-html-matchersを試しています。 以前は rspec-tag_matchers を使用していたのですが、出力がちょっとイマイチでした。 Ruby Toolsでざらざらと探した結果、rspec-html-matchersを試してみることにしました。 Form用のマッチャーがいろいろあったり、内部に存在するタグをチェックしたりできるのが嬉しいですね。capybaraのhave_cssはsubject側で find(selector)しておく必要があるので、ややめんどくさいです。 いまのところの不満点は Hashで渡していくのがちょっと格好悪い 正規表現での属性チェックができなかった 暗黙的なsubjectを使用する場合、ブロックがあると不具合がでる 3番目なんですが、have_tag マッチャーにブロックを渡し場合 shouldメソッドのレシーバをかかないと、ブロック内へと処理が流れないようです。 subject { render } it do should have_tag(&quot;a&quot;) do # このブロック処理が走らない with_tag(&quot;b&quot;) end end のように書いてしまうと with_tag(&quot;b&quot;) の部分が動作しません。3行目を明示的に subject.shouldとすると動いてくれました。rspecの問題なのか、rspec-html-matchersの問題なのか切りわけが難しいのでとりあえず、我慢することにしました。 ブロックを渡さない場合は大丈夫です。 他は良好に使えています。 View Specの良い例が欲しいです。</div>
    </div>
    <footer class="readon">
        <a href="https://blog.eiel.info/blog/2012/06/22/rspec-html-matchers/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
</div>


    </div>
</div>


<aside class="sidebar-wrapper">
    <div class="container">
        
        <div class="tags tag-cloud">
            <h2>Tags</h2>
            <ul class="post-tags">
                
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/a8d">
                        a8d
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/ablog">
                        ablog
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/acativerecord">
                        acativerecord
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/actiondispatch">
                        actiondispatch
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/actionpack">
                        actionpack
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/actionview">
                        actionview
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/actirerecord">
                        actirerecord
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/active_model">
                        active_model
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/active_support">
                        active_support
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/activemodel">
                        activemodel
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/activerecord">
                        activerecord
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/activesupport">
                        activesupport
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/ajax">
                        ajax
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/angularjs">
                        angularjs
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/api">
                        api
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/apt">
                        apt
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/araxis">
                        araxis
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/arel">
                        arel
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/atom">
                        atom
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/atom-editor">
                        atom-editor
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/autolayout">
                        autolayout
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/aws">
                        aws
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/bash">
                        bash
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/bdd">
                        bdd
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/bluemix">
                        bluemix
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/bot">
                        bot
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/browserify">
                        browserify
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/bundle">
                        bundle
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/c">
                        c
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/capistrano">
                        capistrano
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/capybara">
                        capybara
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/centos">
                        centos
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/chatwork">
                        chatwork
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/chef">
                        chef
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/ci">
                        ci
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/cleditor">
                        cleditor
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/cocoapods">
                        cocoapods
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/codekata">
                        codekata
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/color">
                        color
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/css">
                        css
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/cucumber">
                        cucumber
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/dart">
                        dart
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/database">
                        database
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/debian">
                        debian
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/debug">
                        debug
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/deltawalker">
                        deltawalker
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/devise">
                        devise
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/devlove">
                        devlove
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/docker">
                        docker
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/ediff">
                        ediff
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/el-get">
                        el-get
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/emacs">
                        emacs
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/event">
                        event
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/facebook">
                        facebook
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/fizzbuzz">
                        fizzbuzz
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/funtoo">
                        funtoo
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/gdb">
                        gdb
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/gentoo">
                        gentoo
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/gentoo-prefix">
                        gentoo-prefix
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/gherkin">
                        gherkin
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/git">
                        git
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/github">
                        github
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/gitolite">
                        gitolite
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/gitx">
                        gitx
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/gmail">
                        gmail
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/gpg">
                        gpg
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/grub">
                        grub
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/gulp">
                        gulp
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/hakyll">
                        hakyll
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/haskell">
                        haskell
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/helm">
                        helm
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/heroku">
                        heroku
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/hiroshima.rb">
                        hiroshima.rb
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/html">
                        html
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/html5">
                        html5
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/hubot">
                        hubot
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/hwebsys">
                        hwebsys
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/i18n">
                        i18n
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/iam">
                        iam
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/idobata">
                        idobata
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/inputmethod">
                        inputmethod
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/ios">
                        ios
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/ios24h">
                        ios24h
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/javascript">
                        javascript
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/jekyll">
                        jekyll
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/jenkins">
                        jenkins
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/kaleidoscope">
                        kaleidoscope
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/karabiner">
                        karabiner
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/linux">
                        linux
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/liquid">
                        liquid
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/lisp">
                        lisp
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/ltdd">
                        ltdd
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/lt%E9%A7%86%E5%8B%95">
                        lt駆動
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/lt%E9%A7%86%E5%8B%95%E9%96%8B%E7%99%BA">
                        lt駆動開発
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/mac">
                        mac
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/magit">
                        magit
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/markdown">
                        markdown
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/materialdesign">
                        materialdesign
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/microdata">
                        microdata
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/migemo">
                        migemo
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/monad">
                        monad
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/nginx">
                        nginx
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/nodejs">
                        nodejs
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/npm">
                        npm
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/objective-c">
                        objective-c
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/opendata">
                        opendata
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/opendiff">
                        opendiff
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/osc">
                        osc
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/osh">
                        osh
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/osh2015">
                        osh2015
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/output">
                        output
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/p4merge">
                        p4merge
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/packer">
                        packer
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/pandoc">
                        pandoc
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/phantomjs">
                        phantomjs
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/poltergeist">
                        poltergeist
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/polymer">
                        polymer
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/postgis">
                        postgis
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/postgres">
                        postgres
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/postgresql">
                        postgresql
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/pry">
                        pry
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/python">
                        python
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/qiita">
                        qiita
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/rack">
                        rack
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/rahaeljs">
                        rahaeljs
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/rails">
                        rails
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/rails3">
                        rails3
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/rails4">
                        rails4
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/railtie">
                        railtie
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/rbenv">
                        rbenv
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/rdf">
                        rdf
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/redis">
                        redis
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/redmine">
                        redmine
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/review">
                        review
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/route53">
                        route53
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/rspec">
                        rspec
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/rspec-html-matchers">
                        rspec-html-matchers
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/ruboty">
                        ruboty
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/ruby">
                        ruby
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/rubykaigi">
                        rubykaigi
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/rust">
                        rust
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/s3">
                        s3
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/sacala">
                        sacala
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/scala">
                        scala
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/scalaz">
                        scalaz
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/selenium">
                        selenium
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/sensu">
                        sensu
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/sh">
                        sh
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/sitespec">
                        sitespec
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/skk">
                        skk
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/slack">
                        slack
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/slim">
                        slim
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/state%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3">
                        stateパターン
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/swift">
                        swift
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/tdd">
                        tdd
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/tkdiff">
                        tkdiff
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/tmux">
                        tmux
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/travis">
                        travis
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/tumx">
                        tumx
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/twilio">
                        twilio
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/twitter">
                        twitter
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/uitabbarcontroller">
                        uitabbarcontroller
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/vagrant">
                        vagrant
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/vim">
                        vim
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/wercker">
                        wercker
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/windows8">
                        windows8
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/wisper">
                        wisper
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/wtm">
                        wtm
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/xcode">
                        xcode
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/xml">
                        xml
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/xxdiff">
                        xxdiff
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/zeus">
                        zeus
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/zsh">
                        zsh
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E3%81%99%E3%81%94%E3%81%84%E5%90%88%E5%90%8C%E5%8B%89%E5%BC%B7%E4%BC%9A">
                        すごい合同勉強会
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E3%81%99%E3%81%94%E3%81%84%E5%BA%83%E5%B3%B6">
                        すごい広島
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88">
                        イベント
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E3%82%A8%E3%83%83%E3%82%BB%E3%82%A4">
                        エッセイ
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E3%82%A8%E3%83%87%E3%82%A3%E3%82%BF">
                        エディタ
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E3%82%AA%E3%83%B3%E3%83%A9%E3%82%A4%E3%83%B3%E5%8B%89%E5%BC%B7%E4%BC%9A">
                        オンライン勉強会
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E3%82%AA%E3%83%BC%E3%83%97%E3%83%B3%E3%82%BB%E3%83%9F%E3%83%8A%E3%83%BC">
                        オープンセミナー
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E3%82%B3%E3%83%BC%E3%83%89%E3%83%AA%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0">
                        コードリーディング
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0">
                        スクラム
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E3%82%B9%E3%82%BF%E3%83%BC%E3%83%88%E3%82%A2%E3%83%83%E3%83%97">
                        スタートアップ
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%89">
                        スライド
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E3%83%8D%E3%82%BF">
                        ネタ
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E3%83%92%E3%83%AD%E3%83%8F%E3%82%BF">
                        ヒロハタ
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E3%83%A2%E3%83%8A%E3%83%89">
                        モナド
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E3%83%A2%E3%83%8A%E3%83%89%E5%A4%89%E6%8F%9B%E5%AD%90">
                        モナド変換子
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E3%83%A9%E3%83%BC%E3%83%A1%E3%83%B3%E5%B1%8B">
                        ラーメン屋
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E3%83%AA%E3%83%95%E3%82%A1%E3%82%AF%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0">
                        リファクタリング
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%AD%E3%83%A3%E3%83%B3%E3%83%90%E3%82%B9">
                        リーンキャンバス
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%BC%E3%83%88%E3%82%A2%E3%83%83%E3%83%97">
                        リーンスタートアップ
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E4%BB%95%E4%BA%8B%E3%81%97%E3%82%8D">
                        仕事しろ
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E4%BC%9D%E3%81%88%E3%82%8B">
                        伝える
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E5%86%85%E5%8C%85%E8%A1%A8%E8%A8%98">
                        内包表記
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E5%8B%89%E5%BC%B7%E4%BC%9A">
                        勉強会
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E5%9C%B0%E5%9F%9F">
                        地域
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E5%9E%8B%E3%82%AF%E3%83%A9%E3%82%B9">
                        型クラス
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E5%B2%A1%E5%B1%B1">
                        岡山
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E5%B2%A1%E5%B1%B1git%E5%8B%89%E5%BC%B7%E4%BC%9A">
                        岡山git勉強会
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E5%BA%83%E5%B3%B6">
                        広島
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E5%BA%83%E5%B3%B6ruby%E5%8B%89%E5%BC%B7%E4%BC%9A">
                        広島ruby勉強会
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E6%83%85%E5%A0%B1%E6%95%B4%E7%90%86">
                        情報整理
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E6%8B%A1%E5%BC%B5%E5%9E%8B%E5%BF%83%E7%AD%8B%E7%97%87">
                        拡張型心筋症
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E6%9B%B8%E8%A9%95">
                        書評
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E6%A5%BD%E3%81%97%E3%81%84">
                        楽しい
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E7%94%9F%E6%B4%BB">
                        生活
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E8%80%83%E3%81%88%E6%96%B9">
                        考え方
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E8%89%B2">
                        色
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E8%A3%9C%E5%8A%A9%E4%BA%BA%E5%B7%A5%E5%BF%83%E8%87%93">
                        補助人工心臓
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E8%AA%AD%E6%9B%B8%E3%83%A1%E3%83%A2">
                        読書メモ
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E9%96%A2%E6%95%B0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E5%85%A5%E9%96%80">
                        関数プログラミング入門
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://blog.eiel.info/tags/%E9%9F%B3%E5%A3%B0%E7%B7%A8%E9%9B%86">
                        音声編集
                    </a>
                </li>
                
            </ul>
        </div>
        
        
        <div id="profile">
            <div class="eyecatch">
                <img id="photo" src="/images/nopicture.png" alt="profile">
            </div>
            <a href="http://eiel.info/">Website</a>
            <div class="data">
                
                <a href="https://www.facebook.com/eielh" target="_blank"><i class="fa fa-facebook-square"></i></a>
                
                
                <a href="https://twitter.com/eileh" target="_blank"><i class="fa fa-twitter-square"></i></a>
                
                
                <a href="https://github.com/eiel" target="_blank"><i class="fa fa-github-square"></i></a>
                
                <pre id="description">
                </pre>
                <ul id="urls" class="post-tags"></ul>
            </div>
        </div>
        
    </div>
</aside>



<footer class="copy">
    <p>&copy; 2018  Tomohiko Himura </p>
    <p>Powered by <a href="http://gohugo.io" target="_blank">Hugo</a>, Theme <a href="https://github.com/dim0627/hugo_theme_aglaus" target="_blank">Aglaus</a> designed by <a href="http://yet.unresolved.xyz" target="_blank">Daisuke Tsuji</a></p>
</footer>

<script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script src="https://blog.eiel.info/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-34566858-1', 'auto');
ga('send', 'pageview');

</script>


<script>
$(function() {
    var url = "https://ja.gravatar.com/eiel.hal@gmail.com.json?callback=?";
    $.getJSON(url)
        .done(function(data) {
            var entry = data.entry[0];
            $("#photo").attr("src", entry.photos[0].value);
            $("#username").html(entry.name.familyName + " " + entry.name.givenName);
            $("#description").html(entry.aboutMe);
            entry.urls.forEach(function(el){
                $("#urls").append($("<li><a href='" + el.value + "'>" + el.title + "</a></li>"));
            });
            $("#profile").show();
        });
});
</script>

